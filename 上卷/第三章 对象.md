# ç¬¬ä¸‰ç«  å¯¹è±¡

<!-- TOC -->

- [ç¬¬ä¸‰ç«  å¯¹è±¡](#ç¬¬ä¸‰ç« -å¯¹è±¡)
  - [è¯­æ³•](#è¯­æ³•)
  - [ç±»å‹](#ç±»å‹)
    - [å†…ç½®å¯¹è±¡](#å†…ç½®å¯¹è±¡)
      - [æ–‡å­—å½¢å¼å’Œæ„é€ å½¢å¼](#æ–‡å­—å½¢å¼å’Œæ„é€ å½¢å¼)
  - [å¯¹è±¡çš„å†…å®¹](#å¯¹è±¡çš„å†…å®¹)
    - [[[GET]] [[PUT]]](#get-put)
    - [å¯è®¡ç®—çš„å±æ€§å](#å¯è®¡ç®—çš„å±æ€§å)
    - [æµ…æ‹·è´å’Œæ·±æ‹·è´](#æµ…æ‹·è´å’Œæ·±æ‹·è´)
      - [æµ…æ‹·è´](#æµ…æ‹·è´)
        - [Object.assign(...)](#objectassign)
      - [æ·±æ‹·è´](#æ·±æ‹·è´)
    - [å±æ€§æè¿°ç¬¦](#å±æ€§æè¿°ç¬¦)
      - [æè¿°ç¬¦çš„ä¸‰ä¸ªç‰¹æ€§](#æè¿°ç¬¦çš„ä¸‰ä¸ªç‰¹æ€§)
      - [æè¿°ç¬¦æ–¹æ³•](#æè¿°ç¬¦æ–¹æ³•)
      - [getter setter å’Œ åŒå‘ç»‘å®š](#getter-setter-å’Œ-åŒå‘ç»‘å®š)
        - [getter setter](#getter-setter)
        - [åŒå‘ç»‘å®š](#åŒå‘ç»‘å®š)
    - [ä¸å˜æ€§](#ä¸å˜æ€§)
      - [1.å¯¹è±¡å¸¸é‡](#1å¯¹è±¡å¸¸é‡)
      - [2.ç¦æ­¢æ‰©å±•](#2ç¦æ­¢æ‰©å±•)
      - [3.å¯†å°](#3å¯†å°)
      - [4.å†»ç»“](#4å†»ç»“)
    - [å­˜åœ¨æ€§](#å­˜åœ¨æ€§)
      - [åˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨](#åˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨)
      - [æšä¸¾](#æšä¸¾)
    - [for...of](#forof)
      - [æ•°ç»„çš„ [Symbol.iterator] è¿­ä»£å™¨](#æ•°ç»„çš„-symboliterator-è¿­ä»£å™¨)
      - [å¯¹è±¡çš„è¿­ä»£å™¨](#å¯¹è±¡çš„è¿­ä»£å™¨)

<!-- /TOC -->

## è¯­æ³•

å¯¹è±¡çš„å®šä¹‰, æœ‰ä¸¤ç§å½¢å¼:

- å£°æ˜å½¢å¼

``` javascript
var obj = {
  key: 'value'
}
```

- æ„é€ å½¢å¼

``` javascript
var obj = new Object()
obj.key = 'value'
```

## ç±»å‹

> `JavaScript` ä¸­ä¸€å…±æœ‰ `6` ç§åŸºæœ¬ç±»å‹(è¯­è¨€ç±»å‹)

- string
- number
- **object**
- boolean
- null
- undefined

å¯¹è±¡å°±æ˜¯å…¶ä¸­çš„ä¸€ç§, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `typeof` è¯­å¥æ¥åˆ¤æ–­æŸå˜é‡å±äºä»€ä¹ˆç±»å‹

``` javascript
typeof 'str'     // < "string"
typeof 1         // < "number"
typeof true      // < "boolean"
typeof undefined // < "undefined"

typeof {}        // < "object"
typeof []        // < "object"
typeof null      // < "object"

typeof function(){}  // < "function"
```

> åŸæ¥æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡

æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯ æ•°ç»„è¿˜æ˜¯å¯¹è±¡, è¿™è®©æˆ‘ä»¬è‡ªç„¶è€Œç„¶è§‰å¾—æ•°ç»„åº”è¯¥æ˜¯ä¸€ç§åŸºæœ¬ç±»å‹;

æˆ‘ä»¬å¯ä»¥ç”± `typeof []` çš„è¿”å›å€¼çœ‹å‡º, å®é™…ä¸Šæ•°ç»„ä¹Ÿæ˜¯ `object` ç±»å‹, å®ƒä¹Ÿå…·å¤‡ä¸€äº›é¢å¤–çš„è¡Œä¸º, å¹¶ä¸”å…¶ç»„ç»‡æ–¹å¼æ¯”ä¸€èˆ¬çš„å¯¹è±¡è¦ç¨å¾®å¤æ‚ä¸€äº›;

ä»¥ä¸‹å°±æ˜¯æ•°ç»„ä½œä¸ºå¯¹è±¡æ—¶æ‰€è¡¨ç°å‡ºçš„è¡Œä¸ºçš„é“è¯!

`[].length`

`[].map(...)`

``` javascript
[1, 2].length      // 2

[1, 2].map(...)

var a = [1, 2, 3]  // (3)[1, 2, 3]
a.bar = 4          // (4)[1, 2, 3, bar: 4]
a.bar              // 4
```

> ä¸ºä»€ä¹ˆ `null` çš„ç±»å‹ä¹Ÿæ˜¯ `object`?

`null` æœ‰æ—¶ä¼šè¢«å½“åšå¯¹è±¡, è¿™å…¶å®æ˜¯è¯­è¨€æœ¬èº«çš„ä¸€ä¸ª `bug`, ä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶, `JavaScript` ä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½éƒ½ä¸º0çš„è¯, ä¼šåˆ¤æ–­ä¸º `object` ç±»å‹, `null` çš„äºŒè¿›åˆ¶è¡¨ç¤ºå…¨æ˜¯ 0, è‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯ 0, æ‰€ä»¥æ‰§è¡Œ `typeof` æ—¶ä¼šè¿”å› `object`

### å†…ç½®å¯¹è±¡

- String
- Number
- Boolean
- Object
- Function
- Array
- Date
- RegExp
- Error

ä»–ä»¬å®é™…ä¸Šåªæ˜¯ä¸€äº›å†…ç½®å‡½æ•°, è¿™äº›å†…ç½®å‡½æ•°å¯ä»¥å½“åšæ„é€ å‡½æ•°æ¥ä½¿ç”¨, å¦‚: `var str = new String('str')`

#### æ–‡å­—å½¢å¼å’Œæ„é€ å½¢å¼

æˆ‘ä»¬åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æ—¶, é€šå¸¸æ˜¯å¯ä»¥é€‰æ‹©**æ–‡å­—å½¢å¼**æˆ–**æ„é€ å½¢å¼**å£°æ˜çš„, å¦‚ä¸‹:

**æ–‡å­—å½¢å¼**

``` javascript
var str = 'str'     // type = "string"
var boolean = true  // type = "boolean"
var num = 1         // type = "number"
var obj = {}        // type = "object"
var arr = []        // type = "object"
```

**æ„é€ å½¢å¼**

``` javascript
var str = new String('str')     // type = "object"
var boolean = new Boolean(true) // type = "object"
var number = new Number(1)      // type = "object"
var obj = new Object({})        // type = "object"
var arr = new Array(1, 2)       // type = "object"
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, **æ–‡å­—å½¢å¼** å£°æ˜çš„ å­—ç¬¦ä¸², å¸ƒå°”å€¼, æ•°å€¼, ä»–ä»¬éƒ½å¯¹åº”çš„æ˜¯è‡ªå·±çš„åŸºç¡€ç±»å‹, è¿™äº›ç±»å‹åªæ˜¯æ™®é€šçš„**å­—é¢é‡**, ä»–ä»¬æ˜¯ä¸å…·å¤‡ä»»ä½•æ–¹æ³•çš„;

> ä½†äº‹å®ä¸Š, æˆ‘ä¹ˆå¯ä»¥é€šè¿‡ `'str'.length` çš„æ–¹å¼, è®¿é—®åˆ°è¯¥å­—ç¬¦ä¸²çš„é•¿åº¦, è¿™æ˜¯ä¸ºä»€ä¹ˆ?

è¿™æ˜¯å› ä¸º, å¼•æ“ä¼šè‡ªåŠ¨æŠŠå­—ç¬¦ä¸²å­—é¢é‡è½¬æ¢æˆä¸€ä¸ª `String` å¯¹è±¡, æ‰€ä»¥æˆ‘ä»¬æ‰å¯ä»¥è®¿é—®å­—ç¬¦ä¸²çš„å±æ€§å’Œæ–¹æ³•, åŒæ ·, å¸ƒå°”å€¼å’Œæ•°å€¼ä¹Ÿæ˜¯.

**æ€»çš„æ¥è¯´:**
- String, Boolean, Number çš„**æ–‡å­—å½¢å¼**, ä¼šè¢«å¼•æ“è‡ªåŠ¨è½¬æ¢ä¸º**æ„é€ å½¢å¼**çš„å¯¹è±¡
- null, undefined æ²¡æœ‰å¯¹åº”çš„**æ„é€ å½¢å¼**, å®ƒä»¬åªæœ‰**æ–‡å­—å½¢å¼**
- Date åªæœ‰**æ„é€ å½¢å¼**
- Object, Array, Function, RegExp, æ— è®ºä½¿ç”¨**æ–‡å­—å½¢å¼**è¿˜æ˜¯**æ„é€ å½¢å¼**, å®ƒä»¬éƒ½æ˜¯å¯¹è±¡, ä¸æ˜¯å­—é¢é‡

## å¯¹è±¡çš„å†…å®¹

> å¯¹è±¡çš„å†…å®¹æ˜¯ç”±ä¸€äº›å­˜å‚¨åœ¨ç‰¹å®šå‘½åä½ç½®çš„å€¼(ä»»æ„ç±»å‹)ç»„æˆçš„, æˆ‘ä»¬ç§°ä¹‹ä¸ºå±æ€§;

> å½“æˆ‘ä»¬è¯´å†…å®¹çš„æ—¶å€™, ä¼¼ä¹æš—ç¤ºå®ƒä»¬æ˜¯å­˜å‚¨åœ¨å¯¹è±¡å†…éƒ¨çš„, ä½†å®é™…ä¸Šå­˜å‚¨åœ¨å¯¹è±¡å®¹å™¨å†…éƒ¨çš„åªæœ‰è¿™äº›**å±æ€§çš„åç§°**, è¿™äº›åç§°å°±æ˜¯**æŒ‡é’ˆ**, æŒ‡å‘å€¼çœŸæ­£å­˜å‚¨çš„ä½ç½®

å¯¹å¯¹è±¡å±æ€§çš„è®¿é—®, æœ‰ä¸¤ç§å½¢å¼:

`var obj = { a: 1 }`

- å±æ€§è®¿é—®: `obj.a`
- é”®è®¿é—®: `obj['a']`

### [[GET]] [[PUT]]

> `[[GET]]` å’Œ `[[PUT]]` éƒ½æ˜¯è¯­è¨€è‡ªèº«å·²ç»å®ç°äº†çš„æ–¹æ³•

- `[[GET]]`
å½“æˆ‘ä»¬è®¿é—®å¯¹è±¡æ—¶(`obj.name`), ä¼šè°ƒç”¨ç±»ä¼¼ `[[GET]]()` çš„æ–¹æ³•, å¼•æ“é¦–å…ˆä¼šåœ¨å¯¹è±¡å†…éƒ¨æŸ¥æ‰¾åç§°ç›¸åŒçš„å±æ€§, å¦‚æœæ‰¾åˆ°å°±ä¼šç«‹åˆ»è¿”å›, æ²¡æ‰¾åˆ°å°±ä¼šç»§ç»­åœ¨å¯¹è±¡çš„ `[[Prototype]]`é“¾ ä¸­æŸ¥æ‰¾, å¦‚æœè¿˜æ²¡æ‰¾åˆ°, å°±ä¼šè¿”å› `undefined`

- `[[PUT]]`
è¯¥æ–¹æ³•ä¼šåœ¨ç¼–è¾‘å¯¹è±¡å±æ€§çš„æ—¶å€™è¢«è§¦å‘(`obj.name = 'muzi'`), è¯¥æ–¹æ³•æ¯”æƒ³è±¡ä¸­è¦å¤æ‚çš„å¤š, è¢«è§¦å‘åä¸»è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œ:
  - å±æ€§æ˜¯å¦æ˜¯è®¿é—®**æè¿°ç¬¦**(â“åé¢ä¼šè®²åˆ°ä»€ä¹ˆæ˜¯æè¿°ç¬¦)? å¦‚æœæ˜¯å¹¶å­˜åœ¨ `setter`, å³è°ƒç”¨ `setter`
  - å±æ€§çš„æ•°æ®æè¿°ç¬¦ä¸­ `writable` æ˜¯å¦ä¸º `false`? å¦‚æœæ˜¯, åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹é™é»˜å¤±è´¥, ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡º `TypeError` å¼‚å¸¸
  - å¦‚æœéƒ½ä¸æ˜¯, å°†è¯¥å€¼è®¾ç½®ä¸ºå±æ€§çš„å€¼

### å¯è®¡ç®—çš„å±æ€§å

> å¯ä»¥åœ¨æ–‡å­—å½¢å¼ä¸­ä½¿ç”¨ [] åŒ…è£¹ä¸€ä¸ªè¡¨è¾¾å¼æ¥å½“ä½œå±æ€§å:

``` javascript
var prefix = 'foo'

var obj = {
  foobar: 1,
  foobaz: 2
}

obj[prefix + 'bar']  // 1
obj[prefix + 'baz']  // 2
```

> ES6 å¢åŠ äº†*å¯è®¡ç®—å±æ€§å*:

``` javascript
const prefix = 'foo'

const obj = {
  [`${prefix}bar`]: 1,
  [`${prefix}baz`]: 2
}

obj.foobar     // < 1
obj['foobar']  // < 1
obj['foobaz']  // < 2
```

### æµ…æ‹·è´å’Œæ·±æ‹·è´

#### æµ…æ‹·è´

JavaScript å¼•æ“ä¸ºäº†é¿å…ä¸€æ¬¡æ€§å¤åˆ¶è¿‡å¤§çš„**å¯¹è±¡å‰¯æœ¬**, åœ¨å¯¹**å¯¹è±¡**è¿›è¡Œèµ‹å€¼æ—¶, åªæ˜¯`å¼•ç”¨`äº†ç›®æ ‡å¯¹è±¡çš„å†…å­˜åœ°å€, å¹¶æ²¡æœ‰åˆ›å»ºå…¨æ–°çš„å‰¯æœ¬

``` javascript
var foo = {
    name: 'muzi'
}

var bar = { foo: foo }

bar.foo.name = 'yaya'
console.log(foo.name)  // yaya

foo.name = 'dundun'
console.log(bar.foo.name)  // dundun
```

æ— è®ºä½ é€šè¿‡ä½•ç§é€”å¾„å»ä¿®æ”¹ åŸå§‹å¯¹è±¡ `foo` ä¸­çš„å±æ€§å€¼, æ“ä½œéƒ½å°†åŒæ­¥åˆ°åŸå§‹å¯¹è±¡ä»¥åŠå¼•ç”¨è¯¥å¯¹è±¡çš„å˜é‡ä¸Š.

##### Object.assign(...)

> `assign` è‹±æ–‡é‡Šä¹‰: vt. èµ‹å€¼

ES6 å®šä¹‰äº† `Object.assign` æ–¹æ³•æ¥å®ç°æµ…æ‹·è´, è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯**ç›®æ ‡å¯¹è±¡**, ä¹‹åå¯ä»¥è·Ÿå¤šä¸ªæºå¯¹è±¡;

å®ƒä¼šéå†ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡çš„æ‰€æœ‰**å¯æšä¸¾**çš„è‡ªæœ‰é”®, å¹¶æŠŠå®ƒä»¬å¤åˆ¶ *(ä½¿ç”¨ = æ“ä½œç¬¦èµ‹å€¼)* åˆ°ç›®æ ‡å¯¹è±¡, æœ€åè¿”å›ç›®æ ‡å¯¹è±¡;

ä»”ç»†çœ‹ä»¥ä¸‹æ¡ˆä¾‹:

``` javascript
var foo = {
    name: 'muzi',
    info: {
        age: 25,
        local: 'cq'
    }
}

var bar = Object.assign({}, foo)
bar.name = 'yaya'
bar.info.local = 'bj'

console.log(bar.name)  // yaya
console.log(foo.name)  // muzi

console.log(bar.info.local)  // bj
console.log(foo.info.local)  // bj
```

- è„šæœ¬é¦–å…ˆä¼šéå† `foo` å¯¹è±¡ä¸­æ‰€æœ‰å¯æšä¸¾çš„å±æ€§
- å°† `foo.name` èµ‹å€¼ç»™ `bar`, è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„**å­—é¢é‡èµ‹å€¼**, æ‰€ä»¥è„šæœ¬ä¼šä¸º `bar` åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å±æ€§
- å°† `foo.info` èµ‹å€¼ç»™ `bar`, è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡èµ‹å€¼, æ‰€ä»¥ `bar` åªæ˜¯å¼•ç”¨äº† `foo.info` å¯¹è±¡

> `Object.assign` çš„è¡Œä¸º:

``` javascript
var foo = {
    info: {
        name: 'muzi',
        age: 25
    }
}

var bar = {
    id: '123',
    info: {
        name: 'yaya',
        age: 29
    }
}

var baz = Object.assign({
    info: {
        name: 'dundun',
        age: 2,
        local: 'cq',
        attr: 'dog'
    }
}, foo, bar)

console.log(baz)  // { id: '123', info: { name: 'yaya', age: 29 } }
```

- `Object.assign` ä¼šä»¥æœ€åä¸€ä¸ª**æºå¯¹è±¡**ä¸ºæœ€ä¼˜å…ˆèµ‹å€¼
- æœ€åä¸€ä¸ª**æºå¯¹è±¡**ä¼šå®Œå…¨æ›¿æ¢ä¹‹å‰å¯¹è±¡å·²æœ‰çš„å±æ€§, ä¿ç•™æ²¡æœ‰çš„å±æ€§

#### æ·±æ‹·è´

ä½†æ˜¯è¿™å¯¹äºæ™®é€šå­—é¢é‡çš„å€¼å°±ä¸åŒäº†, æ–°çš„å¯¹è±¡ä¼šå®Œå…¨æ‹·è´æ—§å¯¹è±¡ä¸­çš„å€¼, ä½œä¸ºä¸€ä¸ªæ–°çš„å±æ€§å­˜åœ¨, å¦‚ä¸‹:

``` javascript
var name = 'muzi'

var person = {
  name: name,
  age: 25
}

person.name = 'yaya'
console.log(name)  // muzi
console.log(person.name)  // yaya
```

> ç”±æ­¤æˆ‘ä»¬èƒ½å¾—åˆ°ä¸€ä¸ªå·§å¦™çš„`æ·±æ‹·è´`çš„æ–¹æ³•:

``` javascript
var num = 1

var foo = {
    name: 'muzi'
}

var bar = {
    foo: JSON.parse(JSON.stringify(foo))
}

bar.foo.name = 'yaya'
console.log(bar.foo.name)  // yaya
console.log(foo.name)      // muzi
```

æˆ‘ä»¬å°†åŸå§‹å¯¹è±¡è½¬æ¢æˆä¸€ä¸ª`JSON å­—ç¬¦ä¸²`, å†å°†è¯¥å­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªç»“æ„ä¸åŸå§‹å¯¹è±¡ä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡, å®Œæˆäº†`æ·±æ‹·è´`

### å±æ€§æè¿°ç¬¦

> ä» ES5 å¼€å§‹, JavaScript æä¾›äº†å¯ä»¥ç›´æ¥æ£€æµ‹æˆ–è®¾ç½®å±æ€§ç‰¹æ€§çš„æ–¹æ³•, æ¯”å¦‚åˆ¤æ–­å±æ€§æ˜¯å¦å¯è¯»

#### æè¿°ç¬¦çš„ä¸‰ä¸ªç‰¹æ€§

- `writable`
å¯å†™, å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼
- `enumberable`
å¯æšä¸¾, å†³å®šå±æ€§èƒ½å¦è¢«æšä¸¾, å¦‚æœä¸º false, åˆ™åœ¨ `for...in` å¾ªç¯ä¸­ä¸ä¼šæšä¸¾å‡ºè¯¥å±æ€§
- `configurable`
  - å¯é…ç½®, è¯¥å€¼ä¸º `true` æ—¶, æ‰èƒ½ä½¿ç”¨ `Object.defineProperty` è¿›è¡Œä¿®æ”¹
  - å¦‚æœè¯¥å€¼ä¸º `false`, ä¸ä»…ä¸èƒ½ä¿®æ”¹å…¶æè¿°, ä¹Ÿä¸èƒ½åˆ é™¤è¿™ä¸ªå±æ€§
  - éœ€è¦æ³¨æ„çš„æ˜¯, æŠŠ `configurable` ä¿®æ”¹æˆ false æ˜¯å•å‘æ“ä½œ, æ— æ³•æ’¤é”€!

#### æè¿°ç¬¦æ–¹æ³•

- Object.**getOwnPropertyDescriptor**(obj = `Object`, property = `String`)
è¿”å›ç›®æ ‡å¯¹è±¡å±æ€§çš„æ‰€æœ‰ç‰¹æ€§

``` javascript
var obj = { name: 'muzi' }
console.log(Object.getOwnPropertyDescriptor(obj, 'name'))

// {
//     value: 'muzi',      # å€¼
//     writable: true,     # å¯å†™
//     enumerable: true,   # å¯æšä¸¾
//     configurable: true  # å¯é…ç½®
// }
```

- Object.**defineProperty**(obj = `Object`, property = `String`, descriptor = `Object`)
ç”¨äºå®šä¹‰ä¸€ä¸ªæ–°å±æ€§, æˆ–è€…ä¿®æ”¹ä¸€ä¸ªå·²æœ‰å±æ€§çš„å€¼æˆ–ç‰¹æ€§(å¦‚æœå®ƒçš„ configurable ä¸º true çš„è¯)

``` javascript
var obj = { name: 'muzi' }

Object.defineProperty(obj, 'name', {
  value: 'yaya',
  writable: false  // ä¸å¯å†™
})

obj.name = 'dundun'
console.log(obj.name)  // yaya
```

``` javascript
var obj = { name: 'muzi' }

Object.defineProperty(obj, 'age', {
  value: 25,
  writable: true,
  enumerable: false  // ä¸å¯æšä¸¾
})

console.log(obj.age)  // 25

for (var key in obj) {
  console.log(key)  // name
}
```

- Object.**defineProperties**(obj = `Object`, descriptors = `Object`)
ç”¨äºå®šä¹‰æˆ–ä¿®æ”¹æŸä¸ªå¯¹è±¡å¤šä¸ªå±æ€§

``` javascript
var obj = { name: 'muzi' }
Object.defineProperties(obj, {
  // ä¿®æ”¹ name å±æ€§
  name: {
    value: 'yaya',
    enumerable: false
  },
  // æ–°å¢ age å±æ€§
  age: {
    value: 25,
    writable: false
  }
})

console.log(obj.name) // muzi
console.log(obj.age)  // 25
```

#### getter setter å’Œ åŒå‘ç»‘å®š

##### getter setter

> `getter` å’Œ `setter` æ˜¯ä¸¤ä¸ªéšè—å‡½æ•°, åˆ†åˆ«åœ¨**è·å–å±æ€§**å’Œ**è®¾ç½®å±æ€§**æ—¶è¢«è°ƒç”¨

``` javascript
var obj = {}

Object.defineProperty(obj, 'name', {
  get() {
    console.log('execute getter')
    return this._name_ || 'muzi'
  },
  set(newVal) {
    console.log('execute setter')
    this._name_ = newVal
  }
})

> obj.name
< "execute getter"
< "muzi"
> obj.name = 'yaya'
< "execute setter"
< "yaya"
```

`get` å’Œ `set` å‡½æ•°, èƒ½å¤Ÿåœ¨è®¿é—®æˆ–è®¾ç½®å¯¹è±¡å±æ€§æ—¶, è¿›è¡Œæ‹¦æˆª, è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åšå¾ˆå¤šäº‹, æ¯”å¦‚å¯ä»¥åœ¨è®¾ç½®å±æ€§å€¼çš„æ—¶å€™è¿›è¡Œè¿ç®—:

``` javascript
var obj = {}
Object.defineProperty(obj, 'name', {
    get() {
        return this._name_ || 'Tom Jack'
    },
    set(newVal) {
        var firstName = 'Tom'
        this._name_ = firstName + ' ' + newVal
    }
})

obj.name = 'Hannibal'
console.log(obj.name) // Tom Hannibal
```

##### åŒå‘ç»‘å®š

è¿™é‡Œç®€å•æä¸€ä¸‹ `MVVM`, å®ƒæ˜¯ `Model-View-ViewModel` çš„ç¼©å†™, è¿™ç§æ¨¡å¼å°† `Model`(æ•°æ®) å’Œ `View`(å‰ç«¯æ˜¾ç¤º) æœ€å¤§é™åº¦çš„åˆ†ç¦», è€Œ `ViewModel`(åŒå‘ç»‘å®š) åˆ™è´Ÿè´£å°†ä¸¤è€…å…³è”èµ·æ¥.

çœ‹ä»¥ä¸‹ç¤ºä¾‹:

``` html
<body>
  <p id="el"></p>
  <input id="model" type="text" placeholder="type your name." />
</body>
```

``` javascript
var doc = document
var el = doc.getElementById('el')
var model = doc.getElementById('model')

// åŒå‘ç»‘å®š
var data = {}
Object.defineProperty(data, 'name', {
  get() {
    console.log('execute getter.')
    return this._name_
  },
  set(newVal) {
    console.log('execute getter')

    el.textContent = newVal
    model.value = newVal

    this._name_ = newVal
  }
})
```

æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªé¡µé¢, åœ¨æ§åˆ¶å°è¾“å…¥: `data.name = 'muzi'`, æˆ‘ä»¬ä¼šå‘ç°, å¯¹åº”åœ¨é¡µé¢ä¸­çš„ `Dom` å…ƒç´ ä¹Ÿå‘ç”Ÿäº†å˜åŒ– *(æ•°æ®é©±åŠ¨)*,

å¦‚æœæˆ‘ä»¬æƒ³åœ¨ç”¨æˆ·è¾“å…¥çš„è¿‡ç¨‹ä¸­, å°† `Dom` çš„å†…å®¹ä¸è¾“å…¥å†…å®¹åŒæ­¥æ€ä¹ˆåŠ?

é“ç†å¾ˆç®€å•, ä¹‹æ‰€ä»¥ `data.name = 'muzi'` èƒ½è®© `Dom` å“åº”å¼å˜åŒ–, æ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œ, èµ‹å€¼çš„è¿‡ç¨‹è¢« `setter` æ‹¦æˆªå¹¶èµ‹äºˆäº†æ–°çš„è¡Œä¸º,

é‚£ä¹ˆ, æˆ‘ä»¬ç›‘å¬ `<input />` å…ƒç´ æ¯ä¸€æ¬¡çš„ `keyup` äº‹ä»¶, å¹¶åœ¨äº‹ä»¶å›è°ƒä¸­è§¦å‘ `setter` ä¸å°±è¡Œäº†ä¹ˆ?

``` javascript
model.addEventListener('keyup', function() {
  data.name = this.value
})
```

æ‰“å¼€é¡µé¢, åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹, ä½ ä¼šå‘ç° `Dom` ä¸è¾“å…¥æ¡†æ˜¯å®Œå…¨åŒæ­¥çš„, `åŒå‘ç»‘å®š` å°±æ˜¯è¿™ä¹ˆç®€å•!

### ä¸å˜æ€§

> æ‰€è°“ä¸å˜æ€§, æ˜¯æŒ‡æˆ‘ä»¬å¸Œæœ›å¯¹è±¡ä¸­çš„æŸä¸€å±æ€§èƒ½å¤ŸçœŸæ­£çš„åšåˆ°ä¸å¯ç¯¡æ”¹(å¸¸é‡)

ä»¥ä¸‹"é”å®šğŸ”"å±æ€§çš„æ–¹æ³•, å¯¹äº**å­—é¢é‡**æ¥è¯´, å¯ä»¥åšåˆ°å®Œå…¨ä¸å¯ç¯¡æ”¹, ä½†å¯¹äº**å¯¹è±¡(åŒ…æ‹¬æ•°ç»„, å‡½æ•°ç­‰)å±æ€§**, å…¶å†…éƒ¨å†…å®¹æ˜¯ä¸å—å½±å“çš„,

ä¾‹å¦‚æˆ‘ä»¬çŸ¥é“ `ES6` ä¸­çš„ `const` å·²ç»èƒ½å¤Ÿä¸ºæˆ‘ä»¬åˆ›å»º**å¸¸é‡**äº†.

å¯¹äº**å­—é¢é‡**, ä¸€æ—¦åˆ›å»º, å°±ä¸å¯æ›´æ”¹, å¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯.

``` javascript
const name = 'muzi'
name = 'yaya'
// < TypeError: Assignment to constant variable
```

è€Œå¯¹äº**å¯¹è±¡**, æˆ‘ä»¬ä»ç„¶å¯ä»¥æ”¹å˜å…¶å†…éƒ¨çš„å±æ€§.

``` javascript
const arr = []
arr[0] = 1
// < 1
```

æ¥ä¸‹æ¥, æˆ‘ä»¬è¿›å…¥æ­£é¢˜.

#### 1.å¯¹è±¡å¸¸é‡

- `writable: false` å’Œ `configurable: false`
  - ğŸš«ç¦æ­¢ç¼–è¾‘ç°æœ‰å±æ€§
  - ğŸš«ç¦æ­¢é‡æ–°é…ç½®å±æ€§
  - ğŸš«ç¦æ­¢åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§

``` javascript
var obj = {}
Object.defineProperty(obj, 'NAME', {
    value: 'muzi',
    writable: false,
    configurable: false,
})

// console
> obj.NAME = 'yaya'
< 'yaya'
> obj.NAME
< 'muzi'

> delete obj.NAME
< false

> Object.defineProperty(obj, 'NAME', { writable: true })
< TypeError: Cannot redefine property: NAME
```

#### 2.ç¦æ­¢æ‰©å±•

- Object.**preventExtensions**(obj = `Object`)
  - ğŸš«ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§
  - âœ…å¯ç¼–è¾‘ç°æœ‰å±æ€§
  - âœ…å¯åˆ é™¤ç°æœ‰å±æ€§

``` javascript
var obj = {
  name: 'muzi'
}

Object.preventExtensions(obj)

obj.name = 'yaya'
obj.age = 28

console.log(obj)  // { name: 'yaya' }
```

æ³¨æ„, åœ¨**ä¸¥æ ¼æ¨¡å¼**ä¸‹, æ·»åŠ æ–°å±æ€§ä¼šæŠ›å‡º `TypeError` é”™è¯¯.

#### 3.å¯†å°

- Object.**seal**(obj = `Object`)
  - ğŸš«ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§
  - ğŸš«ç¦æ­¢é‡æ–°é…ç½®ä»»ä½•ç°æœ‰å±æ€§
  - ğŸš«ç¦æ­¢åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§
  - âœ…å¯ç¼–è¾‘ç°æœ‰å±æ€§

ä¸ä»¥ä¸‹ä»£ç ç­‰åŒ:

``` javascript
var obj = {
  name: 'muzi'
}

Object.preventExtensions(obj)
for (var key in obj) {
  Object.defineProperty(obj, key, {
    configurable: false,
  })
}
```

#### 4.å†»ç»“

- Object.**freeze**(obj = `Object`)
  - ğŸš«ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§
  - ğŸš«ç¦æ­¢ç¼–è¾‘ä»»ä½•ç°æœ‰å±æ€§
  - ğŸš«ç¦æ­¢é‡æ–°é…ç½®ä»»ä½•ç°æœ‰å±æ€§
  - ğŸš«ç¦æ­¢åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§

è¿™ä¸ªæ–¹æ³•æ˜¯æœ€é«˜çº§åˆ«çš„ä¸å¯å˜æ€§, å‰é¢æˆ‘ä»¬è®¨è®ºè¿‡, è¿™ä¸ªå¯¹è±¡å¼•ç”¨çš„å…¶ä»–å¯¹è±¡æ˜¯ä¸å—å½±å“çš„.

ä¸ä»¥ä¸‹ä»£ç ç­‰åŒ:

``` javascript
var obj = {
  name: 'muzi'
}

Object.preventExtensions(obj)
for (var key in obj) {
  Object.defineProperty(obj, key, {
    writable: false,
    configurable: false,
  })
}
```

### å­˜åœ¨æ€§

> æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•, åœ¨ä¸è®¿é—®å±æ€§å€¼çš„æƒ…å†µä¸‹, åˆ¤æ–­å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå±æ€§

#### åˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨

- `in` æ“ä½œç¬¦ä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡åŠå…¶ `[[Prototype]]` å¯¹è±¡ä¸­

``` javascript
var obj = {
  name: 'muzi'
}
obj.__proto__.age = 25

// console
> ("name") in obj
< true
> ("age") in obj
< true
```

> è¿˜è®°å¾—æˆ‘ä»¬è¯´è¿‡, æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ä¹ˆ? æ‰€ä»¥ `in` æ“ä½œç¬¦åŒæ ·èƒ½å¤Ÿåœ¨æ•°ç»„ä¸Šä½¿ç”¨:

``` javascript
var arr = [1, 2, 3]

// console
> ("0") in arr
< true
> ("3") in arr
< false
```

- `[obj]`**hasOwnProperty** åªä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡ä¸­, ä¸ä¼šæ£€æŸ¥ `[[Prototype]]` é“¾ *(ä»è‹±æ–‡è¯­ä¹‰å°±èƒ½çœ‹å‡º, æ˜¯å¦å…·æœ‰è‡ªèº«å±æ€§)*

``` javascript
var obj = {
  name: 'muzi'
}
obj.__proto__.age = 25

// console
> obj.hasOwnProperty('name')
< true
> obj.hasOwnProperty('age')
< false
```

#### æšä¸¾

- `[obj]`propertyIsEnumerable(property = `String`) æ£€æŸ¥ç»™å®šå±æ€§æ˜¯å¦ç›´æ¥å­˜åœ¨åœ¨å¯¹è±¡ä¸­(è€Œä¸æ˜¯åŸå‹é“¾), å¹¶ä¸”æ»¡è¶³ `enumerable: true`

- æšä¸¾å±æ€§, è¿™ä¸¤ä¸ªæ–¹æ³•åªä¼šæŸ¥æ‰¾å¯¹è±¡ç›´æ¥åŒ…å«çš„å±æ€§(è€Œä¸æ˜¯åŸå‹é“¾)
  - Object.**keys**(obj = `Object`) è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰**å¯æšä¸¾å±æ€§**çš„ `key`
  - Object.**getOwnPropertyNames**(obj = `Object`) è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å±æ€§ `key` çš„æ•°ç»„, æ— è®ºä»–ä»¬æ˜¯å¦å¯æšä¸¾

``` javascript
var obj = {}
Object.defineProperties(obj, {
    name: {
        value: 'muzi',
        enumerable: false,
    },
    age: {
        value: 25,
        enumerable: true,
    }
})

obj.__proto__.loc = 'cq'

console.log(Object.keys(obj))                   // (1)["age"]
console.log(Object.getOwnPropertyNames(obj))    // (2)["name", "age"]
```

### for...of

ES6 ä¸­æ–°å¢äº† `for...of` æ–¹æ³•, è¯¥æ–¹æ³•èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¿«çš„å¾ªç¯æ•°ç»„, ä½†æˆ‘ä»¬åªçŸ¥é“å®ƒèƒ½å¾ªç¯æ•°ç»„, å¦‚æœè¯´èº«ä¸ºå¯¹è±¡çš„æ•°ç»„èƒ½å¤Ÿè¢« `for...of` å¾ªç¯, é‚£ä¹ˆå¯¹è±¡ä¹Ÿå½“ç„¶å¯ä»¥, å¦‚ä½•å®ç°? æˆ‘ä»¬å…ˆä» `iterator` å¯¹è±¡è¯´èµ·.

#### æ•°ç»„çš„ [Symbol.iterator] è¿­ä»£å™¨

æ•°ç»„å†…ç½®äº†ä¸€ä¸ª `Symbol.iterator` æ–¹æ³•, æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹æ•°ç»„çš„**åŸå‹é“¾**æ¥æ‰¾åˆ°è¯¥æ–¹æ³•, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ¥æ‰‹åŠ¨è°ƒç”¨æ•°ç»„, çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„:

``` javascript
var arr = [1, 2, 3]
var it = arr[Symbol.iterator]()

// console
> it.next()
< { value: 1, done: false }
> it.next()
< { value: 2, done: false }
> it.next()
< { value: 3, done: false }
> it.next()
< { value: undefined, done: true }
```

å½“æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼éå†å®Œæ¯•, å†æ‰§è¡Œ `it.next()` å°±ä¼šè¿”å› `done: true`.

`for...of` æ–¹æ³•, äº‹å®ä¸Šå°±æ˜¯è°ƒç”¨ `iterator` è¿­ä»£å™¨å¯¹è±¡çš„ `next()` çš„æ–¹æ³•æ¥éå†æ‰€æœ‰çš„å€¼, ç›´åˆ° `done` å±æ€§è¿”å› `true`, ä¾¿åœæ­¢éå†

#### å¯¹è±¡çš„è¿­ä»£å™¨

å’Œæ•°ç»„ä¸åŒ, æ™®é€šçš„å¯¹è±¡æ²¡æœ‰å†…ç½®**è¿­ä»£å™¨**, ä¼ ç»Ÿå¯¹å¯¹è±¡éå†çš„æ–¹æ³•åªèƒ½å–å‡ºå¯¹è±¡çš„ `key`(æšä¸¾), è¦è®¿é—®å¯¹è±¡çš„å€¼, æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ `key` *(obj[key])* æ¥è®¿é—®,

åˆ©ç”¨ `for...of` æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸ºå¯¹è±¡å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥éå†å¯¹è±¡å¹¶ç›´æ¥è®¿é—®å¯¹è±¡çš„å€¼äº†:

``` javascript
var obj = {
  name: 'muzi',
  age: 25
}

Object.defineProperty(obj, Symbol.iterator, {
    enumerable: false,
    writable: false,
    configurable: true,
    value: function() {
        var o = this
        var idx = 0
        var ks = Object.keys(o)
        return {
            next() {
                return {
                    value: o[ks[idx++]],
                    done: (idx > ks.length),
                }
            }
        }
    }
})

for (var value of obj) {
    console.log(value)
}
// "muzi"
// 25
```
